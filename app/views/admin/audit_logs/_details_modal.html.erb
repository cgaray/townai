<%# app/views/admin/audit_logs/_details_modal.html.erb %>
<%# Renders a modal dialog for viewing log details %>
<%# 
  Required locals:
    - modal_id: unique ID for the modal (e.g., "details-123")
    - title: modal title (e.g., "Action Details", "Event Metadata")
    - sections: array of hashes with :label and :content keys, or nil
                For JSON sections: { label: "Previous State", content: json_string, type: :json }
                For key-value sections: { label: "Metadata", content: hash, type: :key_value }
%>
<dialog id="<%= modal_id %>" class="modal">
  <div class="modal-box max-w-2xl">
    <h3 class="font-bold text-lg mb-4"><%= title %></h3>
    <div class="space-y-4">
      <% sections.each do |section| %>
        <% next unless section[:content].present? %>
        <div>
          <p class="text-sm font-medium mb-1"><%= section[:label] %></p>
          <% if section[:type] == :key_value %>
            <div class="space-y-2">
              <% section[:content].each do |key, value| %>
                <div class="flex gap-2">
                  <span class="font-medium text-sm"><%= key.humanize %>:</span>
                  <span class="text-sm text-base-content/70"><%= value %></span>
                </div>
              <% end %>
            </div>
          <% else %>
            <pre class="text-xs bg-base-200 p-3 rounded overflow-x-auto whitespace-pre-wrap"><%= JSON.pretty_generate(JSON.parse(section[:content])) rescue section[:content] %></pre>
          <% end %>
        </div>
      <% end %>
    </div>
    <div class="modal-action">
      <form method="dialog">
        <button class="btn">Close</button>
      </form>
    </div>
  </div>
  <form method="dialog" class="modal-backdrop">
    <button>close</button>
  </form>
</dialog>
