<%# Topics discussed in meetings this person attended %>
<%# locals: (topics:, topics_pagy:, role_by_document_id:, activity_stats:) %>

<div class="space-y-4">
  <h2 class="text-xl font-bold flex items-center gap-2">
    <%= icon("list-bullet", size: "w-5 h-5", class: "text-primary") %>
    Topics Discussed
    <span class="badge badge-ghost badge-sm font-normal"><%= activity_stats[:total_topics] %> topics</span>
  </h2>

  <% if topics.any? %>
    <p class="text-sm text-base-content/60">
      Topics from meetings where this person was present. Actions shown reflect committee decisions.
    </p>

    <%# Topics List %>
    <div class="card bg-base-100 border border-base-200 shadow-sm">
      <div class="divide-y divide-base-200">
        <% topics.each do |topic| %>
          <%= render "people/activity_topic_item",
                     topic: topic,
                     role: role_by_document_id[topic.document_id] %>
        <% end %>
      </div>
    </div>

    <%# Pagination %>
    <%= render "shared/pagination",
               pagy: topics_pagy,
               url_builder: ->(page) { url_for(topics_page: page) } %>
  <% else %>
    <%= render "shared/empty_state",
               icon_name: "list-bullet",
               title: "No topics yet",
               description: "Topics from meetings this person attended will appear here." %>
  <% end %>
</div>
